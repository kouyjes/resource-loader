<!DOCTYPE html>
<html lang="cn">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="../dest/resource-loader.js"></script>
    <script src="./promise.js"></script>
    <!--<script async src="http://localhost:7771/test/test.js"></script>-->
    <script>
        if(!window.Promise){
            window.Promise = HERE.$Promise;
        }
        var loader = new HERE.ResourceLoader({
            baseURI:'../',
            token:Math.random(),
            timeout:8000
            //loaderTimeout:1000
        });
        var resource = {
            type:'js',
            serial:true,
            urls:[/*'test/js/a.js',*/'http://localhost:7771/test/test.js'/*,'test/js/b.js'*/],
            /*dependence:{
                type:'css',
                serial:true,
                urls:['http://localhost:7771/test/test.css','http://localhost:7771/test/test1.css']
            }*/
        };
        function loadResource(){
            for(var i = 0;i < 1;i++){
                (function(){
                    var index = i;
                    loader.load(resource).then(function () {
                        console.log('loaded finish ! :' + index);
                    },function(e){
                        console.log(e);
                    });
                })();

            }

        }
    </script>
</head>
<body>
    <button onclick="loadResource()">load</button>
</body>
</html>